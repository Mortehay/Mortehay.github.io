var starArr=[],imgArr=[],titleArr=[],textArr=[],starNumber=[],photosInLine=3;$(document).ready(function(){$.getJSON("https://api.myjson.com/bins/2tqig",function(json){for(var i=0;photosInLine>i;i++)starNumber.push(json[i].stars),imgArr.push(json[i].image),titleArr.push(json[i].title),textArr.push(json[i].paragraph);$(".template").template({id:"#template",imgLink:imgArr,stars:starArr,imgTitle:titleArr,imgText:textArr})});$("#morePhotos").on("click",function(){$.getJSON("https://api.myjson.com/bins/2tqig",function(json){if(starArr=[],imgArr=[],titleArr=[],textArr=[],starNumber=[],console.log("photosInLine=",photosInLine),photosInLine<json.length){for(var i=photosInLine;photosInLine+3>i;i++)starNumber.push(json[i].stars),imgArr.push(json[i].image),titleArr.push(json[i].title),textArr.push(json[i].paragraph);$(".template").closest(".template").last().template({id:"#template",imgLink:imgArr,stars:starArr,imgTitle:titleArr,imgText:textArr}),photosInLine+=3}})})}),function($){$.fn.template=function(options){for(var info=[],html=$(options.id).html(),i=0;i<imgArr.length;i++){for(var stars="",j=1;6>j;j++)j<=starNumber[i]&&(stars+='<span class="blackStar">&#9733</span>'),j>starNumber[i]&&(stars+='<span class="whiteStar">&#9734;</span>');starArr.push(stars)}for(var i=0;i<imgArr.length;i++)info.push({imgLink:imgArr[i],stars:starArr[i],imgTitle:titleArr[i],imgText:textArr[i]});var content=tmpl(html,{data:info});$(this).append(content)}}(jQuery);